<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transmisi√≥n en Vivo</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    
    <link rel="stylesheet" href="styles.css?v=55">
    
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet">
    
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>
    <div id="waitingScreen" class="waiting-screen">
        <div class="waiting-content">
            <div class="pulse-animation">
                <div class="pulse-dot"></div>
            </div>
            <h1>‚è≥ Esperando transmisi√≥n...</h1>
            <p>La transmisi√≥n comenzar√° pronto</p>
        </div>
    </div>

    <div id="streamContainer" class="stream-container" style="display: none;">
        
        <div class="stream-header">
            <div class="live-badge">
                <span class="live-dot"></span> TRANSMISI√ìN EN VIVO
            </div>
            
            <div class="header-buttons">
                <button class="help-btn" onclick="toggleGuide()">
                    <span>‚ùì</span> Configurar Subtitulos
                </button>
                
                <button id="btnAI" class="ai-toggle-btn" onclick="toggleAI()">
                    <span>üéôÔ∏è</span> Subt√≠tulos IA 74%
                </button>
            </div>
        </div>

        <div class="video-wrapper">
            <div id="aiCaptions" class="ai-caption-box"></div>

            <video 
                id="mainPlayer" 
                class="video-js vjs-big-play-centered vjs-fluid" 
                controls 
                preload="auto" 
                style="display:none;">
            </video>

            <iframe 
                id="genericFrame" 
                style="display:none; width:100%; height:100%; position:absolute; top:0; left:0; border:none;" 
                allowfullscreen 
                allow="autoplay; encrypted-media; picture-in-picture">
            </iframe>

            <video 
                id="screenSharePlayer" 
                style="display:none; width:100%; height:100%; position:absolute; top:0; left:0; background:black; z-index: 10;" 
                controls 
                playsinline>
            </video>
        </div>

        <div class="stream-footer">
            <div class="donation-section">
                <h3>üíñ Apoya esta transmisi√≥n</h3>
                <div class="donation-content">
                    <div class="donation-text">
                        <p>¬øTe gusta el contenido? ¬°Ap√≥yanos con una donaci√≥n!</p>
                        <p class="donation-methods">Env√≠a tu Yape o Plin ‚Üí</p>
                    </div>
                    <div class="donation-qr">
                        <img id="yapeQR" src="imagenes/yape.png" alt="QR Yape" onerror="this.style.display='none';">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="audioGuide" class="modal-guide" style="display: none;">
        <div class="modal-content">
            <span class="close-btn" onclick="toggleGuide()">&times;</span>
            
            <div id="guide-mobile" style="display: none;">
                <h2>üì± Modo Celular Detectado</h2>
                <div class="guide-body">
                    <p>En celulares no necesitas configurar nada complejo. Solo sigue estas reglas:</p>
                    <div class="guide-step step-blue">
                        <h4>üîä 1. Sube el Volumen</h4>
                        <p>El video debe sonar fuerte.</p>
                    </div>
                    <div class="guide-step step-red">
                        <h4>üö´ 2. NO USES AUD√çFONOS</h4>
                        <p>Descon√©ctalos para que el micr√≥fono escuche.</p>
                    </div>
                </div>
            </div>

            <div id="guide-pc" style="display: none;">
                <h2>üîß Gu√≠a de Configuraci√≥n (Paso a Paso)</h2>
                
                <div class="guide-body">
                    <h4>PASO 1: Activar en Windows üíª</h4>
                    <ul>
                        <li>Ve a "Panel de Control de Sonido" ‚Üí Pesta√±a <strong>Grabar</strong>.</li>
                        <li>Si no ves "Mezcla Est√©reo", haz clic derecho y marca <strong>"Mostrar dispositivos deshabilitados"</strong>.</li>
                        <li>Haz clic derecho sobre "Mezcla Est√©reo" y dale a <strong>Activar</strong>.</li>
                    </ul>

                    <h4>PASO 2: Selecci√≥n en el Navegador (IMPORTANTE) üåê</h4>
                    <p>Aqu√≠ es donde la mayor√≠a falla. Sigue esto exacto:</p>
                    <ol>
                        <li>Mira arriba a la izquierda, en la barra de direcci√≥n.</li>
                        <li>Haz clic en el icono del candado üîí o micr√≥fono üéôÔ∏è.</li>
                        <li>Busca la opci√≥n "Micr√≥fono".</li>
                        <li class="highlight-step">CAMBIA "Predeterminado" POR "Mezcla est√©reo (Stereo Mix)".</li>
                    </ol>

                    <h4>PASO 3: Finalizar ‚úÖ</h4>
                    <ul>
                        <li>Presiona la tecla <strong>F5</strong> para recargar la p√°gina.</li>
                        <li>Sube el volumen de tus parlantes.</li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-youtube/2.6.1/Youtube.min.js"></script>
    
    <script src="script.js?v=55"></script>
</body>
</html>
